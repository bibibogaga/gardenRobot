<?xml version="1.0"?>

<launch>

    <arg name="rviz" default="true" />
    <!-- bag的地址与名称 -->
    <!--arg name="bag_filename" default="/home/yoga/my_work/livox_formid-40/src/Livox-SDK-master/build/sample/lidar_lvx_file/test.bag"/-->

    <!-- launch the livox_driver-->
    <include file="$(find livox_ros_driver)/launch/livox_lidar.launch">
    </include>
    <!-- launch the chassis_driver-->
    <!--include file="$(find chassis_ros)/launch/chassis_serial.launch">
    </include!-->

    <!-- launch the livox relocal node -->
    <node pkg="livox_relocalization" type="livox_scanRegistration" name="scanRegistration" output="screen">
    </node>

    <node pkg="livox_relocalization" type="livox_laserMapping" name="laserMapping" output="screen">
        <param name="map_file_path" type="string" value="/home/yoga/my_work/catkin_yoga/src/TX2_StereoSLAM-master/src/loam_only/loam_only_relocal/src/livox_relocalization-master/map" />
        <param name="use_map_update" type="bool" value="false" />
    </node>

    <!-- ROS rviz -->
    <group if="$(arg rviz)">
        <node launch-prefix="nice" pkg="rviz" type="rviz" name="rviz" args="-d $(find livox_relocalization)/rviz_cfg/loam_livox.rviz" />
    </group>



    <node name="Navigation" pkg="tx2_slam" type="Navigation" output="screen">

        <!--set the rrt plan parameters-->
        <param name="rrtRange" type="double" value="1.0" />
        <param name="rrtSolutionTimeLimit" type="double" value="3" />
        <param name="NavigatonTimerDuration" type="double" value="0.04" />
        <param name="bounds_lmin" type="double" value="-20" />
        <param name="bounds_lmax" type="double" value="20" />
        <param name="bounds_wmin" type="double" value="-20" />
        <param name="bounds_wmax" type="double" value="20" />
        <param name="bounds_hmin" type="double" value="-0.3" />
        <param name="bounds_hmax" type="double" value="0.3" />
        <param name="SLAMCarShape_l" type="double" value="0.9" />
        <param name="SLAMCarShape_w" type="double" value="1.0" />
        <param name="SLAMCarShape_h" type="double" value="0.3" />

        <!--set speed cmd value limit-->
        <param name="cmd_vel_l_max" type="double" value="0.30" />
        <param name="cmd_vel_r_max" type="double" value="0.30" />
        <param name="cmd_vel_l_min" type="double" value="0.19" />
        <param name="cmd_vel_r_min" type="double" value="0.19" />
        <param name="cmd_vel_ro_r_max" type="double" value="0.28" />
        <param name="cmd_vel_ro_l_max" type="double" value="0.28" />

        <!--set pid parameters-->
        <param name="straight_kp" type="double" value="0.4" />
        <param name="straight_ki" type="double" value="0.0" />
        <param name="straight_kd" type="double" value="0.0" />
        <param name="orient_kp" type="double" value="0.24"/>
        <param name="orient_ki" type="double" value="0.0" />
        <param name="orient_kd" type="double" value="0.0" />
        <param name="omega_kp" type="double" value="1.0" />
        <param name="omega_ki" type="double" value="0.0" />
        <param name="omega_kd" type="double" value="0.0" />
        <param name="theta_kp" type="double" value="1.5" />
        <param name="theta_ki" type="double" value="0.0" />
        <param name="theta_kd" type="double" value="0.0" />
        <param name="isUseThetaPid" type="bool" value="true" />
        <param name="isUseOmegaPid" type="bool" value="false" />
        <param name="isUsePosePid" type="bool" value="true" />
        <param name="constSpeed" type="double" value="0.3" />
        <param name="constOmega" type="double" value="0.7" />

        <!--set the task finished satisfied threshold value-->
        <param name="straight_bia" type="double" value="0.2" />
        <param name="orient_bia" type="double" value="0.05" />

        <!--set the length between back wheels and the zed2-->
        <param name="carLength" type="double" value="0.28" />

        <!--set the height to discard ground when rrt plan-->
        <param name="groundHeightMax" type="double" value="-0.2" />

        <!--set the speed bia between r&l wheels to manually fix the orient when go straight-->
        <param name="l_r_vel_bia" type="double" value="0.000 " />

        <!--set the self navigation parameters-->
        <param name="thetaBiaRange" type="double" value="0.85" />
        <param name="thetaBiaInc" type="double" value="0.1" />
        <param name="lengthRange" type="double" value="3.6" />
        <param name="lengthInc" type="double" value="0.1" />
        <param name="lengthMax_threshold" type="double" value="2" />
        <param name="lengthMax_security" type="double" value="1.5" />
        <param name="stopThreshold" type="double" value="0.0005" />

        <!-- @yoga:tracking state -->
        <param name="trackingState" type="int" value="1" />
    </node>

    <node name="rover" pkg="rover" type="rover">
    </node>

</launch>
